# AUTOGENERATED. Run generator/main.py to regenerate
"""
[  0   ] [  1   ]
11111111 -------- header
-------- 1111---- remVersion
-------- ----1--- channel
"""

import numpy as np
from . import BaseTypes



class BasestationSetConfiguration:
    header = 0                # integer [0, 255]             Header byte indicating the type of packet
    remVersion = 0            # integer [0, 15]              Version of roboteam_embedded_messages
    channel = 0               # integer [0, 1]               Channel on which the basestation and robots communicate



# ================================ GETTERS ================================
    @staticmethod
    def get_header(payload):
        return ((payload[0]));

    @staticmethod
    def get_remVersion(payload):
        return ((payload[1] & 0b11110000) >> 4);

    @staticmethod
    def get_channel(payload):
        return (payload[1] & 0b00001000) > 0;

# ================================ SETTERS ================================
    @staticmethod
    def set_header(payload, header):
        payload[0] = header;

    @staticmethod
    def set_remVersion(payload, remVersion):
        payload[1] = ((remVersion << 4) & 0b11110000) | (payload[1] & 0b00001111);

    @staticmethod
    def set_channel(payload, channel):
        payload[1] = ((channel << 3) & 0b00001000) | (payload[1] & 0b11110111);

# ================================ ENCODE ================================
    def encode(self):
        payload = np.zeros(BaseTypes.PACKET_SIZE_BASESTATION_SET_CONFIGURATION, dtype=np.uint8)
        BasestationSetConfiguration.set_header              (payload, self.header)
        BasestationSetConfiguration.set_remVersion          (payload, self.remVersion)
        BasestationSetConfiguration.set_channel             (payload, self.channel)
        return payload


# ================================ DECODE ================================
    def decode(self, payload):
        self.header           = BasestationSetConfiguration.get_header(payload)
        self.remVersion       = BasestationSetConfiguration.get_remVersion(payload)
        self.channel          = BasestationSetConfiguration.get_channel(payload)


    def print_bit_string(self):
        payload = self.encode()
        for i in range(len(payload)):
            print(format(payload[i], '08b'), end=" ")
        print()
