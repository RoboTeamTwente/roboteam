# AUTOGENERATED. Run generator/main.py to regenerate
"""
[  0   ] [  1   ] [  2   ] [  3   ] [  4   ]
11111111 -------- -------- -------- -------- header
-------- 1111---- -------- -------- -------- remVersion
-------- ----1111 -------- -------- -------- id
-------- -------- 1------- -------- -------- play
-------- -------- -1------ -------- -------- pause
-------- -------- --1----- -------- -------- stop
-------- -------- ---1---- -------- -------- previous_song
-------- -------- ----1--- -------- -------- next_song
-------- -------- -----111 11------ -------- volume
-------- -------- -------- --1----- -------- volume_up
-------- -------- -------- ---1---- -------- volume_down
-------- -------- -------- ----11-- -------- folder_id
-------- -------- -------- ------11 111111-- song_id
"""

import numpy as np
from . import REM_BaseTypes



class REM_RobotMusicCommand:
    header = 0                # integer [0, 255]             Header byte indicating the type of packet
    remVersion = 0            # integer [0, 15]              Version of roboteam_embedded_messages
    id = 0                    # integer [0, 15]              Id of the robot
    play = 0                  # integer [0, 1]               Set to play the current song
    pause = 0                 # integer [0, 1]               Set to pause the current song
    stop = 0                  # integer [0, 1]               Set to stop the current song
    previous_song = 0         # integer [0, 1]               Set to stop the current song
    next_song = 0             # integer [0, 1]               Set to stop the current song
    volume = 0                # integer [0, 31]              Set the volume. Value between 1 and 31. 0 is ignored
    volume_up = 0             # integer [0, 1]               Set to increase the volume
    volume_down = 0           # integer [0, 1]               Set to decrease the volume
    folder_id = 0             # integer [0, 3]               The id of the folder, from which to pick a song
    song_id = 0               # integer [0, 255]             Id of the song, given the folder



# ================================ GETTERS ================================
    @staticmethod
    def get_header(payload):
        return ((payload[0]));

    @staticmethod
    def get_remVersion(payload):
        return ((payload[1] & 0b11110000) >> 4);

    @staticmethod
    def get_id(payload):
        return ((payload[1] & 0b00001111));

    @staticmethod
    def get_play(payload):
        return (payload[2] & 0b10000000) > 0;

    @staticmethod
    def get_pause(payload):
        return (payload[2] & 0b01000000) > 0;

    @staticmethod
    def get_stop(payload):
        return (payload[2] & 0b00100000) > 0;

    @staticmethod
    def get_previous_song(payload):
        return (payload[2] & 0b00010000) > 0;

    @staticmethod
    def get_next_song(payload):
        return (payload[2] & 0b00001000) > 0;

    @staticmethod
    def get_volume(payload):
        return ((payload[2] & 0b00000111) << 2) | ((payload[3] & 0b11000000) >> 6);

    @staticmethod
    def get_volume_up(payload):
        return (payload[3] & 0b00100000) > 0;

    @staticmethod
    def get_volume_down(payload):
        return (payload[3] & 0b00010000) > 0;

    @staticmethod
    def get_folder_id(payload):
        return ((payload[3] & 0b00001100) >> 2);

    @staticmethod
    def get_song_id(payload):
        return ((payload[3] & 0b00000011) << 6) | ((payload[4] & 0b11111100) >> 2);

# ================================ SETTERS ================================
    @staticmethod
    def set_header(payload, header):
        payload[0] = header;

    @staticmethod
    def set_remVersion(payload, remVersion):
        payload[1] = ((remVersion << 4) & 0b11110000) | (payload[1] & 0b00001111);

    @staticmethod
    def set_id(payload, id):
        payload[1] = (id & 0b00001111) | (payload[1] & 0b11110000);

    @staticmethod
    def set_play(payload, play):
        payload[2] = ((play << 7) & 0b10000000) | (payload[2] & 0b01111111);

    @staticmethod
    def set_pause(payload, pause):
        payload[2] = ((pause << 6) & 0b01000000) | (payload[2] & 0b10111111);

    @staticmethod
    def set_stop(payload, stop):
        payload[2] = ((stop << 5) & 0b00100000) | (payload[2] & 0b11011111);

    @staticmethod
    def set_previous_song(payload, previous_song):
        payload[2] = ((previous_song << 4) & 0b00010000) | (payload[2] & 0b11101111);

    @staticmethod
    def set_next_song(payload, next_song):
        payload[2] = ((next_song << 3) & 0b00001000) | (payload[2] & 0b11110111);

    @staticmethod
    def set_volume(payload, volume):
        payload[2] = ((volume >> 2) & 0b00000111) | (payload[2] & 0b11111000);
        payload[3] = ((volume << 6) & 0b11000000) | (payload[3] & 0b00111111);

    @staticmethod
    def set_volume_up(payload, volume_up):
        payload[3] = ((volume_up << 5) & 0b00100000) | (payload[3] & 0b11011111);

    @staticmethod
    def set_volume_down(payload, volume_down):
        payload[3] = ((volume_down << 4) & 0b00010000) | (payload[3] & 0b11101111);

    @staticmethod
    def set_folder_id(payload, folder_id):
        payload[3] = ((folder_id << 2) & 0b00001100) | (payload[3] & 0b11110011);

    @staticmethod
    def set_song_id(payload, song_id):
        payload[3] = ((song_id >> 6) & 0b00000011) | (payload[3] & 0b11111100);
        payload[4] = ((song_id << 2) & 0b11111100) | (payload[4] & 0b00000011);

# ================================ ENCODE ================================
    def encode(self):
        payload = np.zeros(REM_BaseTypes.PACKET_SIZE_REM_ROBOT_MUSIC_COMMAND, dtype=np.uint8)
        REM_RobotMusicCommand.set_header              (payload, self.header)
        REM_RobotMusicCommand.set_remVersion          (payload, self.remVersion)
        REM_RobotMusicCommand.set_id                  (payload, self.id)
        REM_RobotMusicCommand.set_play                (payload, self.play)
        REM_RobotMusicCommand.set_pause               (payload, self.pause)
        REM_RobotMusicCommand.set_stop                (payload, self.stop)
        REM_RobotMusicCommand.set_previous_song       (payload, self.previous_song)
        REM_RobotMusicCommand.set_next_song           (payload, self.next_song)
        REM_RobotMusicCommand.set_volume              (payload, self.volume)
        REM_RobotMusicCommand.set_volume_up           (payload, self.volume_up)
        REM_RobotMusicCommand.set_volume_down         (payload, self.volume_down)
        REM_RobotMusicCommand.set_folder_id           (payload, self.folder_id)
        REM_RobotMusicCommand.set_song_id             (payload, self.song_id)
        return payload


# ================================ DECODE ================================
    def decode(self, payload):
        self.header           = REM_RobotMusicCommand.get_header(payload)
        self.remVersion       = REM_RobotMusicCommand.get_remVersion(payload)
        self.id               = REM_RobotMusicCommand.get_id(payload)
        self.play             = REM_RobotMusicCommand.get_play(payload)
        self.pause            = REM_RobotMusicCommand.get_pause(payload)
        self.stop             = REM_RobotMusicCommand.get_stop(payload)
        self.previous_song    = REM_RobotMusicCommand.get_previous_song(payload)
        self.next_song        = REM_RobotMusicCommand.get_next_song(payload)
        self.volume           = REM_RobotMusicCommand.get_volume(payload)
        self.volume_up        = REM_RobotMusicCommand.get_volume_up(payload)
        self.volume_down      = REM_RobotMusicCommand.get_volume_down(payload)
        self.folder_id        = REM_RobotMusicCommand.get_folder_id(payload)
        self.song_id          = REM_RobotMusicCommand.get_song_id(payload)


    def print_bit_string(self):
        payload = self.encode()
        for i in range(len(payload)):
            print(format(payload[i], '08b'), end=" ")
        print()
